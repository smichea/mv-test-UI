/*! For license information please see 606.ecc62e9ee02ce386a5dd.js.LICENSE.txt */
(self.webpackChunkmv_template=self.webpackChunkmv_template||[]).push([[606],{4063:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var a=o[i];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},5035:e=>{"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},o={key:n,value:e[n]};return r(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,a;if(Array.isArray(t)){for(a="[",r=0;r<t.length;r++)r&&(a+=","),a+=e(t[r])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",r=0;r<u.length;r++){var c=u[r],p=e(t[c]);p&&(a&&(a+=","),a+=JSON.stringify(c)+":"+p)}return o.splice(s,1),"{"+a+"}"}}(e)}},8998:(e,t,r)=>{e.exports=function(){function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,r,n)}return r[a].exports}for(var o=void 0,a=0;a<n.length;a++)i(n[a]);return i}return e}()({1:[function(e,t,r){const n=e("./utils"),i=function(){"use strict";const e=n.stringToArray,t=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],r=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],i=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],o=["Thousand","Million","Billion","Trillion"];function a(e,n){var a=function(e,n,s){var u="";if(e<=19)u=(n?" and ":"")+(s?r[e]:t[e]);else if(e<100){const t=Math.floor(e/10),r=e%10;u=(n?" and ":"")+i[t-2],r>0?u+="-"+a(r,!1,s):s&&(u=u.substring(0,u.length-1)+"ieth")}else if(e<1e3){const r=Math.floor(e/100),i=e%100;u=(n?", ":"")+t[r]+" Hundred",i>0?u+=a(i,!0,s):s&&(u+="th")}else{var c=Math.floor(Math.log10(e)/3);c>o.length&&(c=o.length);const t=Math.pow(10,3*c),r=Math.floor(e/t),i=e-r*t;u=(n?", ":"")+a(r,!1,!1)+" "+o[c-1],i>0?u+=a(i,!0,s):s&&(u+="th")}return u};return a(e,!1,n)}const s={};function u(e){const t=e.split(/,\s|\sand\s|[\s\\-]/).map((e=>s[e]));let r=[0];return t.forEach((e=>{if(e<100){let t=r.pop();t>=1e3&&(r.push(t),t=0),r.push(t+e)}else r.push(r.pop()*e)})),r.reduce(((e,t)=>e+t),0)}t.forEach((function(e,t){s[e.toLowerCase()]=t})),r.forEach((function(e,t){s[e.toLowerCase()]=t})),i.forEach((function(e,t){const r=e.toLowerCase();s[r]=10*(t+2),s[r.substring(0,e.length-1)+"ieth"]=s[r]})),s.hundredth=100,o.forEach((function(e,t){const r=e.toLowerCase(),n=Math.pow(10,3*(t+1));s[r]=n,s[r+"th"]=n}));const c=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],p={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function l(e){for(var t=0;t<c.length;t++){const r=c[t];if(e>=r[0])return r[1]+l(e-r[0])}return""}function f(e){for(var t=0,r=1,n=e.length-1;n>=0;n--){const i=e[n],o=p[i];o<r?t-=o:(r=o,t+=o)}return t}function h(e,t){for(var r=[],n=t.charCodeAt(0);e>0;)r.unshift(String.fromCharCode((e-1)%26+n)),e=Math.floor((e-1)/26);return r.join("")}function d(e,t){for(var r=t.charCodeAt(0),n=0,i=0;i<e.length;i++)n+=(e.charCodeAt(e.length-i-1)-r+1)*Math.pow(26,i);return n}function v(e,t){if(void 0!==e)return m(e=Math.floor(e),k(t))}const g={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},y={UPPER:"upper",LOWER:"lower",TITLE:"title"};function m(t,r){let n;const i=t<0;switch(t=Math.abs(t),r.primary){case g.LETTERS:n=h(t,r.case===y.UPPER?"A":"a");break;case g.ROMAN:n=l(t),r.case===y.UPPER&&(n=n.toUpperCase());break;case g.WORDS:n=a(t,r.ordinal),r.case===y.UPPER?n=n.toUpperCase():r.case===y.LOWER&&(n=n.toLowerCase());break;case g.DECIMAL:n=""+t;var o=r.mandatoryDigits-n.length;if(o>0){var s=new Array(o+1).join("0");n=s+n}if(48!==r.zeroCode&&(n=e(n).map((e=>String.fromCodePoint(e.codePointAt(0)+r.zeroCode-48))).join("")),r.regular)for(let e=Math.floor((n.length-1)/r.groupingSeparators.position);e>0;e--){const t=n.length-e*r.groupingSeparators.position;n=n.substr(0,t)+r.groupingSeparators.character+n.substr(t)}else r.groupingSeparators.reverse().forEach((e=>{const t=n.length-e.position;n=n.substr(0,t)+e.character+n.substr(t)}));if(r.ordinal){var u={1:"st",2:"nd",3:"rd"}[n[n.length-1]];(!u||n.length>1&&"1"===n[n.length-2])&&(u="th"),n+=u}break;case g.SEQUENCE:throw{code:"D3130",value:r.token}}return i&&(n="-"+n),n}const b=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function k(t){const r={type:"integer",primary:g.DECIMAL,case:y.LOWER,ordinal:!1};let n,i;const o=t.lastIndexOf(";");switch(-1===o?n=t:(n=t.substring(0,o),i=t.substring(o+1),"o"===i[0]&&(r.ordinal=!0)),n){case"A":r.case=y.UPPER;case"a":r.primary=g.LETTERS;break;case"I":r.case=y.UPPER;case"i":r.primary=g.ROMAN;break;case"W":r.case=y.UPPER,r.primary=g.WORDS;break;case"Ww":r.case=y.TITLE,r.primary=g.WORDS;break;case"w":r.primary=g.WORDS;break;default:{let t=null,i=0,o=0,a=[],s=0;if(e(n).map((e=>e.codePointAt(0))).reverse().forEach((e=>{let r=!1;for(let n=0;n<b.length;n++){const o=b[n];if(e>=o&&e<=o+9){if(r=!0,i++,s++,null===t)t=o;else if(o!==t)throw{code:"D3131"};break}}r||(35===e?(s++,o++):a.push({position:s,character:String.fromCodePoint(e)}))})),i>0){r.primary=g.DECIMAL,r.zeroCode=t,r.mandatoryDigits=i,r.optionalDigits=o;const e=function(e){if(0===e.length)return 0;const t=e[0].character;for(let r=1;r<e.length;r++)if(e[r].character!==t)return 0;const r=e.map((e=>e.position)),n=function(e,t){return 0===t?e:n(t,e%t)},i=r.reduce(n);for(let e=1;e<=r.length;e++)if(-1===r.indexOf(e*i))return 0;return i}(a);e>0?(r.regular=!0,r.groupingSeparators={position:e,character:a[0].character}):(r.regular=!1,r.groupingSeparators=a)}else r.primary=g.SEQUENCE,r.token=n}}return r}const x={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function w(e){var t=[];const r={type:"datetime",parts:t},n=function(r,n){if(n>r){let i=e.substring(r,n);i=i.split("]]").join("]"),t.push({type:"literal",value:i})}};for(var i=0,o=0;o<e.length;){if("["===e.charAt(o)){if("["===e.charAt(o+1)){n(i,o),t.push({type:"literal",value:"["}),i=o+=2;continue}if(n(i,o),i=o,-1===(o=e.indexOf("]",i)))throw{code:"D3135"};let r=e.substring(i+1,o);r=r.split(/\s+/).join("");var a,s={type:"marker",component:r.charAt(0)},u=r.lastIndexOf(",");if(-1!==u){const e=r.substring(u+1),t=e.indexOf("-");let n,i;const o=function(e){return void 0===e||"*"===e?void 0:parseInt(e)};-1===t?n=e:(n=e.substring(0,t),i=e.substring(t+1));const c={min:o(n),max:o(i)};s.width=c,a=r.substring(1,u)}else a=r.substring(1);if(1===a.length)s.presentation1=a;else if(a.length>1){var c=a.charAt(a.length-1);-1!=="atco".indexOf(c)?(s.presentation2=c,"o"===c&&(s.ordinal=!0),s.presentation1=a.substring(0,a.length-1)):s.presentation1=a}else s.presentation1=x[s.component];if(void 0===s.presentation1)throw{code:"D3132",value:s.component};if("n"===s.presentation1[0])s.names=y.LOWER;else if("N"===s.presentation1[0])"n"===s.presentation1[1]?s.names=y.TITLE:s.names=y.UPPER;else if(-1!=="YMDdFWwXxHhmsf".indexOf(s.component)){var p=s.presentation1;if(s.presentation2&&(p+=";"+s.presentation2),s.integerFormat=k(p),s.width&&void 0!==s.width.min&&s.integerFormat.mandatoryDigits<s.width.min&&(s.integerFormat.mandatoryDigits=s.width.min),-1!=="YMD".indexOf(s.component))if(s.n=-1,s.width&&void 0!==s.width.max)s.n=s.width.max,s.integerFormat.mandatoryDigits=s.n;else{var l=s.integerFormat.mandatoryDigits+s.integerFormat.optionalDigits;l>=2&&(s.n=l)}}"Z"!==s.component&&"z"!==s.component||(s.integerFormat=k(s.presentation1)),t.push(s),i=o+1}o++}return n(i,o),r}const E=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],A=["January","February","March","April","May","June","July","August","September","October","November","December"],S=864e5,D=function(e){const t=Date.UTC(e.year,e.month);var r=new Date(t).getUTCDay();return 0===r&&(r=7),r>4?t+(8-r)*S:t-(r-1)*S},T=function(e,t){return{year:e,month:t,nextMonth:function(){return 11===t?T(e+1,0):T(e,t+1)},previousMonth:function(){return 0===t?T(e-1,11):T(e,t-1)},nextYear:function(){return T(e+1,t)},previousYear:function(){return T(e-1,t)}}},O=function(e,t){return(t-e)/(7*S)+1},C=(e,t)=>{let r;switch(t){case"Y":r=e.getUTCFullYear();break;case"M":r=e.getUTCMonth()+1;break;case"D":r=e.getUTCDate();break;case"d":r=(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())-Date.UTC(e.getUTCFullYear(),0))/S+1;break;case"F":r=e.getUTCDay(),0===r&&(r=7);break;case"W":{const t=T(e.getUTCFullYear(),0),n=D(t),i=Date.UTC(t.year,e.getUTCMonth(),e.getUTCDate());let o=O(n,i);if(o>52)i>=D(t.nextYear())&&(o=1);else if(o<1){const e=D(t.previousYear());o=O(e,i)}r=Math.floor(o);break}case"w":{const t=T(e.getUTCFullYear(),e.getUTCMonth()),n=D(t),i=Date.UTC(t.year,t.month,e.getUTCDate());let o=O(n,i);if(o>4)i>=D(t.nextMonth())&&(o=1);else if(o<1){const e=D(t.previousMonth());o=O(e,i)}r=Math.floor(o);break}case"X":{const t=T(e.getUTCFullYear(),0),n=D(t),i=D(t.nextYear()),o=e.getTime();r=o<n?t.year-1:o>=i?t.year+1:t.year;break}case"x":{const t=T(e.getUTCFullYear(),e.getUTCMonth()),n=D(t),i=t.nextMonth(),o=D(i),a=e.getTime();r=a<n?t.previousMonth().month+1:a>=o?i.month+1:t.month+1;break}case"H":r=e.getUTCHours();break;case"h":r=e.getUTCHours(),r%=12,0===r&&(r=12);break;case"P":r=e.getUTCHours()>=12?"pm":"am";break;case"m":r=e.getUTCMinutes();break;case"s":r=e.getUTCSeconds();break;case"f":r=e.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":r="ISO"}return r};let P=null;function F(e,t,r){var n=0,i=0;if(void 0!==r){const e=parseInt(r);n=Math.floor(e/100),i=e%100}var o=function(e,t){var r=C(e,t.component);if(-1!=="YMDdFWwXxHhms".indexOf(t.component))if("Y"===t.component&&-1!==t.n&&(r%=Math.pow(10,t.n)),t.names){if("M"===t.component||"x"===t.component)r=A[r-1];else{if("F"!==t.component)throw{code:"D3133",value:t.component};r=E[r]}t.names===y.UPPER?r=r.toUpperCase():t.names===y.LOWER&&(r=r.toLowerCase()),t.width&&r.length>t.width.max&&(r=r.substring(0,t.width.max))}else r=m(r,t.integerFormat);else if("f"===t.component)r=m(r,t.integerFormat);else if("Z"===t.component||"z"===t.component){const e=100*n+i;if(t.integerFormat.regular)r=m(e,t.integerFormat);else{const o=t.integerFormat.mandatoryDigits;if(1===o||2===o)r=m(n,t.integerFormat),0!==i&&(r+=":"+v(i,"00"));else{if(3!==o&&4!==o)throw{code:"D3134",value:o};r=m(e,t.integerFormat)}}e>=0&&(r="+"+r),"z"===t.component&&(r="GMT"+r),0===e&&"t"===t.presentation2&&(r="Z")}return r};let a;void 0===t?(null===P&&(P=w("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),a=P):a=w(t);const s=new Date(e+60*(60*n+i)*1e3);let u="";return a.parts.forEach((function(e){"literal"===e.type?u+=e.value:u+=o(s,e)})),u}function j(e){var t={};if("datetime"===e.type)t.type="datetime",t.parts=e.parts.map((function(e){var t={};if("literal"===e.type)t.regex=e.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===e.component||"z"===e.component){let r;Array.isArray(e.integerFormat.groupingSeparators)||(r=e.integerFormat.groupingSeparators),t.regex="","z"===e.component&&(t.regex="GMT"),t.regex+="[-+][0-9]+",r&&(t.regex+=r.character+"[0-9]+"),t.parse=function(t){"z"===e.component&&(t=t.substring(3));let n=0,i=0;return r?(n=Number.parseInt(t.substring(0,t.indexOf(r.character))),i=Number.parseInt(t.substring(t.indexOf(r.character)+1))):t.length-1<=2?n=Number.parseInt(t):(n=Number.parseInt(t.substring(0,3)),i=Number.parseInt(t.substring(3))),60*n+i}}else if(e.integerFormat)e.integerFormat.n=e.n,t=j(e.integerFormat);else{t.regex="[a-zA-Z]+";var r={};if("M"===e.component||"x"===e.component)A.forEach((function(t,n){e.width&&e.width.max?r[t.substring(0,e.width.max)]=n+1:r[t]=n+1}));else if("F"===e.component)E.forEach((function(t,n){n>0&&(e.width&&e.width.max?r[t.substring(0,e.width.max)]=n:r[t]=n)}));else{if("P"!==e.component)throw{code:"D3133",value:e.component};r={am:0,AM:0,pm:1,PM:1}}t.parse=function(e){return r[e]}}return t.component=e.component,t}));else{t.type="integer";const r=e.case===y.UPPER;let n;switch(n=e.n&&e.n>0?0===e.optionalDigits?`{${e.n}}`:`{${e.n-e.optionalDigits},${e.n}}`:"+",e.primary){case g.LETTERS:t.regex=r?"[A-Z]+":"[a-z]+",t.parse=function(e){return d(e,r?"A":"a")};break;case g.ROMAN:t.regex=r?"[MDCLXVI]+":"[mdclxvi]+",t.parse=function(e){return f(r?e:e.toUpperCase())};break;case g.WORDS:t.regex="(?:"+Object.keys(s).concat("and","[\\-, ]").join("|")+")+",t.parse=function(e){return u(e.toLowerCase())};break;case g.DECIMAL:t.regex=`[0-9]${n}`,e.ordinal&&(t.regex+="(?:th|st|nd|rd)"),t.parse=function(t){let r=t;return e.ordinal&&(r=t.substring(0,t.length-2)),e.regular?r=r.split(",").join(""):e.groupingSeparators.forEach((e=>{r=r.split(e.character).join("")})),48!==e.zeroCode&&(r=r.split("").map((t=>String.fromCodePoint(t.codePointAt(0)-e.zeroCode+48))).join("")),parseInt(r)};break;case g.SEQUENCE:throw{code:"D3130",value:e.token}}}return t}function N(e,t){if(void 0!==e)return j(k(t)).parse(e)}function M(e,t){const r=j(w(t)),n="^"+r.parts.map((e=>"("+e.regex+")")).join("")+"$";var i=new RegExp(n,"i").exec(e);if(null!==i){const e=161,t=130,n=84,a=72,s=23,u=47,c={};for(let e=1;e<i.length;e++){const t=r.parts[e-1];t.parse&&(c[t.component]=t.parse(i[e]))}if(0===Object.getOwnPropertyNames(c).length)return;let p=0;const l=e=>{p<<=1,p+=e?1:0},f=e=>!(~e&p||!(e&p));"YXMxWwdD".split("").forEach((e=>l(c[e])));const h=!f(e)&&f(t),d=f(n),v=!d&&f(a);p=0,"PHhmsf".split("").forEach((e=>l(c[e])));const g=!f(s)&&f(u),y=(h?"YD":d?"XxwF":v?"XWF":"YMD")+(g?"Phmsf":"Hmsf"),m=this.environment.timestamp;let b=!1,k=!1;if(y.split("").forEach((e=>{if(void 0===c[e])b?(c[e]=-1!=="MDd".indexOf(e)?1:0,k=!0):c[e]=C(m,e);else if(b=!0,k)throw{code:"D3136"}})),c.M>0?c.M-=1:c.M=0,h){const e=Date.UTC(c.Y,0),t=1e3*(c.d-1)*60*60*24,r=new Date(e+t);c.M=r.getUTCMonth(),c.D=r.getUTCDate()}if(d)throw{code:"D3136"};if(v)throw{code:"D3136"};g&&(c.H=12===c.h?0:c.h,1===c.P&&(c.H+=12));var o=Date.UTC(c.Y,c.M,c.D,c.H,c.m,c.s,c.f);return(c.Z||c.z)&&(o-=60*(c.Z||c.z)*1e3),o}}var U=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function I(e,t){if(void 0!==e){if(void 0===t){if(!U.test(e))throw{stack:(new Error).stack,code:"D3110",value:e};return Date.parse(e)}return M.call(this,e,t)}}function R(e,t,r){if(void 0!==e)return F.call(this,e,t,r)}return{formatInteger:v,parseInteger:N,fromMillis:R,toMillis:I}}();t.exports=i},{"./utils":6}],2:[function(e,t,n){(function(r){(function(){var n=e("./utils");const i=(()=>{"use strict";var e=n.isNumeric,t=n.isArrayOfStrings,i=n.isArrayOfNumbers,o=n.createSequence,a=n.isSequence,s=n.isFunction,u=n.isLambda,c=n.isIterable,p=n.getFunctionArity,l=n.isDeepEqual,f=n.stringToArray;function h(e){if(void 0!==e){var t=0;return e.forEach((function(e){t+=e})),t}}function d(e){return void 0===e?0:e.length}function v(e){if(void 0!==e&&0!==e.length)return Math.max.apply(Math,e)}function g(e){if(void 0!==e&&0!==e.length)return Math.min.apply(Math,e)}function y(e){if(void 0!==e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t/e.length}}function m(t,r=!1){if(void 0!==t){var n;if("string"==typeof t)n=t;else if(s(t))n="";else{if("number"==typeof t&&!isFinite(t))throw{code:"D3001",value:t,stack:(new Error).stack};var i=r?2:0;Array.isArray(t)&&t.outerWrapper&&(t=t[0]),n=JSON.stringify(t,(function(t,r){return null!=r&&r.toPrecision&&e(r)?Number(r.toPrecision(15)):r&&s(r)?"":r}),i)}return n}}function b(e,t,r){if(void 0!==e){var n=f(e),i=n.length;if(i+t<0&&(t=0),void 0!==r){if(r<=0)return"";var o=t>=0?t+r:i+t+r;return n.slice(t,o).join("")}return n.slice(t).join("")}}function k(e,t){if(void 0!==e){var r=e.indexOf(t);return r>-1?e.substr(0,r):e}}function x(e,t){if(void 0!==e){var r=e.indexOf(t);return r>-1?e.substr(r+t.length):e}}function w(e){if(void 0!==e)return e.toLowerCase()}function E(e){if(void 0!==e)return e.toUpperCase()}function A(e){if(void 0!==e)return f(e).length}function S(e){if(void 0!==e){var t=e.replace(/[ \t\n\r]+/gm," ");return" "===t.charAt(0)&&(t=t.substring(1))," "===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}}function D(e,t,r){if(void 0!==e){var n;void 0!==r&&0!==r.length||(r=" ");var i=Math.abs(t)-A(e);if(i>0){var o=new Array(i+1).join(r);r.length>1&&(o=b(o,0,i)),n=t>0?e+o:o+e}else n=e;return n}}function*T(e,t){var r=e.apply(this,[t]);if(c(r)&&(r=yield*r),r&&"number"!=typeof r.start&&"number"!==r.end&&!Array.isArray(r.groups)&&!s(r.next))throw{code:"T1010",stack:(new Error).stack};return r}function*O(e,t){if(void 0!==e)return"string"==typeof t?-1!==e.indexOf(t):void 0!==(yield*T(t,e))}function*C(e,t,r){if(void 0!==e){if(r<0)throw{stack:(new Error).stack,value:r,code:"D3040",index:3};var n=o();if(void 0===r||r>0){var i=0,a=yield*T(t,e);if(void 0!==a)for(;void 0!==a&&(void 0===r||i<r);)n.push({match:a.match,index:a.start,groups:a.groups}),a=yield*T(a.next),i++}return n}}function*P(e,t,r,n){if(void 0!==e){var i,o=this;if(""===t)throw{code:"D3010",stack:(new Error).stack,value:t,index:2};if(n<0)throw{code:"D3011",stack:(new Error).stack,value:n,index:4};i="string"==typeof r?function(e){for(var t="",n=0,i=r.indexOf("$",n);-1!==i&&n<r.length;){t+=r.substring(n,i),n=i+1;var o=r.charAt(n);if("$"===o)t+="$",n++;else if("0"===o)t+=e.match,n++;else{var a;if(a=0===e.groups.length?1:Math.floor(Math.log(e.groups.length)*Math.LOG10E)+1,i=parseInt(r.substring(n,n+a),10),a>1&&i>e.groups.length&&(i=parseInt(r.substring(n,n+a-1),10)),isNaN(i))t+="$";else{if(e.groups.length>0){var s=e.groups[i-1];void 0!==s&&(t+=s)}n+=i.toString().length}}i=r.indexOf("$",n)}return t+=r.substring(n)}:r;var a="",s=0;if(void 0===n||n>0){var u=0;if("string"==typeof t){for(var p=e.indexOf(t,s);-1!==p&&(void 0===n||u<n);)a+=e.substring(s,p),a+=r,s=p+t.length,u++,p=e.indexOf(t,s);a+=e.substring(s)}else{var l=yield*T(t,e);if(void 0!==l){for(;void 0!==l&&(void 0===n||u<n);){a+=e.substring(s,l.start);var f=i.apply(o,[l]);if(c(f)&&(f=yield*f),"string"!=typeof f)throw{code:"D3012",stack:(new Error).stack,value:f};a+=f,s=l.start+l.match.length,u++,l=yield*T(l.next)}a+=e.substring(s)}else a=e}}else a=e;return a}}function F(e){if(void 0!==e){var t="undefined"!=typeof window?window.btoa:function(e){return new r.Buffer.from(e,"binary").toString("base64")};return t(e)}}function j(e){if(void 0!==e){var t="undefined"!=typeof window?window.atob:function(e){return new r.Buffer.from(e,"base64").toString("binary")};return t(e)}}function N(e){if(void 0!==e){var t;try{t=encodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrlComponent"}}return t}}function M(e){if(void 0!==e){var t;try{t=encodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrl"}}return t}}function U(e){if(void 0!==e){var t;try{t=decodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrlComponent"}}return t}}function I(e){if(void 0!==e){var t;try{t=decodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrl"}}return t}}function*R(e,t,r){if(void 0!==e){if(r<0)throw{code:"D3020",stack:(new Error).stack,value:r,index:3};var n=[];if(void 0===r||r>0)if("string"==typeof t)n=e.split(t,r);else{var i=0,o=yield*T(t,e);if(void 0!==o){for(var a=0;void 0!==o&&(void 0===r||i<r);)n.push(e.substring(a,o.start)),a=o.end,o=yield*T(o.next),i++;(void 0===r||i<r)&&n.push(e.substring(a))}else n.push(e)}return n}}function _(e,t){if(void 0!==e)return void 0===t&&(t=""),e.join(t)}function q(e,t,r){if(void 0!==e){var n={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"â€°","zero-digit":"0",digit:"#","pattern-separator":";"};void 0!==r&&Object.keys(r).forEach((function(e){n[e]=r[e]}));for(var i=[],o=n["zero-digit"].charCodeAt(0),a=o;a<o+10;a++)i.push(String.fromCharCode(a));var s=i.concat([n["decimal-separator"],n["exponent-separator"],n["grouping-separator"],n.digit,n["pattern-separator"]]),u=t.split(n["pattern-separator"]);if(u.length>2)throw{code:"D3080",stack:(new Error).stack};var c=function(e){var t,r,i,o,a=function(){for(var t,r=0;r<e.length;r++)if(t=e.charAt(r),-1!==s.indexOf(t)&&t!==n["exponent-separator"])return e.substring(0,r)}(),u=function(){for(var t,r=e.length-1;r>=0;r--)if(t=e.charAt(r),-1!==s.indexOf(t)&&t!==n["exponent-separator"])return e.substring(r+1)}(),c=e.substring(a.length,e.length-u.length),p=e.indexOf(n["exponent-separator"],a.length);-1===p||p>e.length-u.length?(t=c,r=void 0):(t=c.substring(0,p),r=c.substring(p+1));var l=t.indexOf(n["decimal-separator"]);return-1===l?(i=t,o=u):(i=t.substring(0,l),o=t.substring(l+1)),{prefix:a,suffix:u,activePart:c,mantissaPart:t,exponentPart:r,integerPart:i,fractionalPart:o,subpicture:e}},p=function(e){var t,r,o=e.subpicture,a=o.indexOf(n["decimal-separator"]);a!==o.lastIndexOf(n["decimal-separator"])&&(t="D3081"),o.indexOf(n.percent)!==o.lastIndexOf(n.percent)&&(t="D3082"),o.indexOf(n["per-mille"])!==o.lastIndexOf(n["per-mille"])&&(t="D3083"),-1!==o.indexOf(n.percent)&&-1!==o.indexOf(n["per-mille"])&&(t="D3084");var u=!1;for(r=0;r<e.mantissaPart.length;r++){var c=e.mantissaPart.charAt(r);if(-1!==i.indexOf(c)||c===n.digit){u=!0;break}}u||(t="D3085"),-1!==e.activePart.split("").map((function(e){return-1===s.indexOf(e)?"p":"a"})).join("").indexOf("p")&&(t="D3086"),-1!==a?o.charAt(a-1)!==n["grouping-separator"]&&o.charAt(a+1)!==n["grouping-separator"]||(t="D3087"):e.integerPart.charAt(e.integerPart.length-1)===n["grouping-separator"]&&(t="D3088"),-1!==o.indexOf(n["grouping-separator"]+n["grouping-separator"])&&(t="D3089");var p=e.integerPart.indexOf(n.digit);-1!==p&&e.integerPart.substring(0,p).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3090"),-1!==(p=e.fractionalPart.lastIndexOf(n.digit))&&e.fractionalPart.substring(p).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3091");var l="string"==typeof e.exponentPart;if(l&&e.exponentPart.length>0&&(-1!==o.indexOf(n.percent)||-1!==o.indexOf(n["per-mille"]))&&(t="D3092"),l&&(0===e.exponentPart.length||e.exponentPart.split("").filter((function(e){return-1===i.indexOf(e)})).length>0)&&(t="D3093"),t)throw{code:t,stack:(new Error).stack}},l=function(e){var t=function(t,r){for(var o=[],a=t.indexOf(n["grouping-separator"]);-1!==a;){var s=(r?t.substring(0,a):t.substring(a)).split("").filter((function(e){return-1!==i.indexOf(e)||e===n.digit})).length;o.push(s),a=e.integerPart.indexOf(n["grouping-separator"],a+1)}return o},r=t(e.integerPart),o=function(e){if(0===e.length)return 0;for(var t=function(e,r){return 0===r?e:t(r,e%r)},r=e.reduce(t),n=1;n<=e.length;n++)if(-1===e.indexOf(n*r))return 0;return r}(r),a=t(e.fractionalPart,!0),s=e.integerPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length,u=s,c=e.fractionalPart.split(""),p=c.filter((function(e){return-1!==i.indexOf(e)})).length,l=c.filter((function(e){return-1!==i.indexOf(e)||e===n.digit})).length,f="string"==typeof e.exponentPart;0===s&&0===l&&(f?(p=1,l=1):s=1),f&&0===s&&-1!==e.integerPart.indexOf(n.digit)&&(s=1),0===s&&0===p&&(p=1);var h=0;return f&&(h=e.exponentPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length),{integerPartGroupingPositions:r,regularGrouping:o,minimumIntegerPartSize:s,scalingFactor:u,prefix:e.prefix,fractionalPartGroupingPositions:a,minimumFactionalPartSize:p,maximumFactionalPartSize:l,minimumExponentSize:h,suffix:e.suffix,picture:e.subpicture}},f=u.map(c);f.forEach(p);var h,d,v,g,y=f.map(l),m=n["minus-sign"],b=n["zero-digit"],k=n["decimal-separator"],x=n["grouping-separator"];if(1===y.length&&(y.push(JSON.parse(JSON.stringify(y[0]))),y[1].prefix=m+y[1].prefix),d=-1!==(h=e>=0?y[0]:y[1]).picture.indexOf(n.percent)?100*e:-1!==h.picture.indexOf(n["per-mille"])?1e3*e:e,0===h.minimumExponentSize)v=d;else{var w=Math.pow(10,h.scalingFactor),E=Math.pow(10,h.scalingFactor-1);for(v=d,g=0;v<E;)v*=10,g-=1;for(;v>w;)v/=10,g+=1}var A=function(e,t){var r=Math.abs(e).toFixed(t);return"0"!==b&&(r=r.split("").map((function(e){return e>="0"&&e<="9"?i[e.charCodeAt(0)-48]:e})).join("")),r},S=A(Y(v,h.maximumFactionalPartSize),h.maximumFactionalPartSize),D=S.indexOf(".");for(-1===D?S+=k:S=S.replace(".",k);S.charAt(0)===b;)S=S.substring(1);for(;S.charAt(S.length-1)===b;)S=S.substring(0,S.length-1);D=S.indexOf(k);var T=h.minimumIntegerPartSize-D,O=h.minimumFactionalPartSize-(S.length-D-1);if(S=(T>0?new Array(T+1).join(b):"")+S,S+=O>0?new Array(O+1).join(b):"",D=S.indexOf(k),h.regularGrouping>0)for(var C=Math.floor((D-1)/h.regularGrouping),P=1;P<=C;P++)S=[S.slice(0,D-P*h.regularGrouping),x,S.slice(D-P*h.regularGrouping)].join("");else h.integerPartGroupingPositions.forEach((function(e){S=[S.slice(0,D-e),x,S.slice(D-e)].join(""),D++}));if(D=S.indexOf(k),h.fractionalPartGroupingPositions.forEach((function(e){S=[S.slice(0,e+D+1),x,S.slice(e+D+1)].join("")})),D=S.indexOf(k),-1!==h.picture.indexOf(k)&&D!==S.length-1||(S=S.substring(0,S.length-1)),void 0!==g){var F=A(g,0);(T=h.minimumExponentSize-F.length)>0&&(F=new Array(T+1).join(b)+F),S=S+n["exponent-separator"]+(g<0?m:"")+F}return S=h.prefix+S+h.suffix}}function z(e,t){if(void 0!==e){if(e=Y(e),(t=void 0===t?10:Y(t))<2||t>36)throw{code:"D3100",stack:(new Error).stack,value:t};return e.toString(t)}}function L(e){var t;if(void 0!==e){if("number"==typeof e)t=e;else if("string"==typeof e&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(e)&&!isNaN(parseFloat(e))&&isFinite(e))t=parseFloat(e);else if(!0===e)t=1;else{if(!1!==e)throw{code:"D3030",value:e,stack:(new Error).stack,index:1};t=0}return t}}function $(e){if(void 0!==e)return Math.abs(e)}function H(e){if(void 0!==e)return Math.floor(e)}function W(e){if(void 0!==e)return Math.ceil(e)}function Y(e,t){var r;if(void 0!==e){if(t){var n=e.toString().split("e");e=+(n[0]+"e"+(n[1]?+n[1]+t:t))}var i=(r=Math.round(e))-e;return.5===Math.abs(i)&&1===Math.abs(r%2)&&(r-=1),t&&(n=r.toString().split("e"),r=+(n[0]+"e"+(n[1]?+n[1]-t:-t))),Object.is(r,-0)&&(r=0),r}}function Z(e){if(void 0!==e){if(e<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:e};return Math.sqrt(e)}}function J(e,t){var r;if(void 0!==e){if(r=Math.pow(e,t),!isFinite(r))throw{stack:(new Error).stack,code:"D3061",index:1,value:e,exp:t};return r}}function G(){return Math.random()}function V(t){if(void 0!==t){var r=!1;return Array.isArray(t)?1===t.length?r=V(t[0]):t.length>1&&(r=t.filter((function(e){return V(e)})).length>0):"string"==typeof t?t.length>0&&(r=!0):e(t)?0!==t&&(r=!0):null!==t&&"object"==typeof t?Object.keys(t).length>0&&(r=!0):"boolean"==typeof t&&!0===t&&(r=!0),r}}function B(e){if(void 0!==e)return!V(e)}function X(e,t,r,n){var i=[t],o=p(e);return o>=2&&i.push(r),o>=3&&i.push(n),i}function*Q(e,t){if(void 0!==e){for(var r=o(),n=0;n<e.length;n++){var i=X(t,e[n],n,e),a=yield*t.apply(this,i);void 0!==a&&r.push(a)}return r}}function*K(e,t){if(void 0!==e){for(var r=o(),n=0;n<e.length;n++){var i=e[n],a=X(t,i,n,e);V(yield*t.apply(this,a))&&r.push(i)}return r}}function*ee(e,t){if(void 0!==e){for(var r,n=!1,i=0;i<e.length;i++){var o=e[i],a=!0;if(void 0!==t){var s=X(t,o,i,e);a=V(yield*t.apply(this,s))}if(a){if(n)throw{stack:(new Error).stack,code:"D3138",index:i};r=o,n=!0}}if(!n)throw{stack:(new Error).stack,code:"D3139"};return r}}function te(){for(var e=[],t=Array.prototype.slice.call(arguments),r=Math.min.apply(Math,t.map((function(e){return Array.isArray(e)?e.length:0}))),n=0;n<r;n++){var i=t.map((e=>e[n]));e.push(i)}return e}function*re(e,t,r){if(void 0!==e){var n,i,o=p(t);if(o<2)throw{stack:(new Error).stack,code:"D3050",index:1};for(void 0===r&&e.length>0?(n=e[0],i=1):(n=r,i=0);i<e.length;){var a=[n,e[i]];o>=3&&a.push(i),o>=4&&a.push(e),n=yield*t.apply(this,a),i++}return n}}function ne(e){var t=o();if(Array.isArray(e)){var r={};e.forEach((function(e){ne(e).forEach((function(e){r[e]=!0}))})),t=ne(r)}else null===e||"object"!=typeof e||u(e)||Object.keys(e).forEach((e=>t.push(e)));return t}function ie(e,t){var r;if(Array.isArray(e)){r=o();for(var n=0;n<e.length;n++){var i=ie(e[n],t);void 0!==i&&(Array.isArray(i)?i.forEach((e=>r.push(e))):r.push(i))}}else null!==e&&"object"==typeof e&&(r=e[t]);return r}function oe(e,t){return void 0===e?t:void 0===t?e:(Array.isArray(e)||(e=o(e)),Array.isArray(t)||(t=[t]),e.concat(t))}function ae(e){return void 0!==e}function se(e){var t=o();if(Array.isArray(e))e.forEach((function(e){t=oe(t,se(e))}));else if(null===e||"object"!=typeof e||u(e))t=e;else for(var r in e){var n={};n[r]=e[r],t.push(n)}return t}function ue(e){if(void 0!==e){var t={};return e.forEach((function(e){for(var r in e)t[r]=e[r]})),t}}function ce(e){if(void 0!==e){if(e.length<=1)return e;for(var t=e.length,r=new Array(t),n=0;n<t;n++)r[t-n-1]=e[n];return r}}function*pe(e,t){var r=o();for(var n in e){var i=X(t,e[n],n,e),a=yield*t.apply(this,i);void 0!==a&&r.push(a)}return r}function le(e){throw{code:"D3137",stack:(new Error).stack,message:e||"$error() function evaluated"}}function fe(e,t){if(!e)throw{code:"D3141",stack:(new Error).stack,message:t||"$assert() statement failed"}}function he(t){if(void 0!==t)return null===t?"null":e(t)?"number":"string"==typeof t?"string":"boolean"==typeof t?"boolean":Array.isArray(t)?"array":s(t)?"function":"object"}function*de(e,r){if(void 0!==e){if(e.length<=1)return e;var n;if(void 0===r){if(!i(e)&&!t(e))throw{stack:(new Error).stack,code:"D3070",index:1};n=function*(e,t){return e>t}}else n=r;var o=function*(e,t){var r=function*(e,t,i){0===t.length?Array.prototype.push.apply(e,i):0===i.length?Array.prototype.push.apply(e,t):(yield*n(t[0],i[0]))?(e.push(i[0]),yield*r(e,t,i.slice(1))):(e.push(t[0]),yield*r(e,t.slice(1),i))},i=[];return yield*r(i,e,t),i},a=function*(e){if(!Array.isArray(e)||e.length<=1)return e;var t=Math.floor(e.length/2),r=e.slice(0,t),n=e.slice(t);return r=yield*a(r),n=yield*a(n),yield*o(r,n)};return yield*a(e)}}function ve(e){if(void 0!==e){if(e.length<=1)return e;for(var t=new Array(e.length),r=0;r<e.length;r++){var n=Math.floor(Math.random()*(r+1));r!==n&&(t[r]=t[n]),t[n]=e[r]}return t}}function ge(e){if(void 0!==e){if(!Array.isArray(e)||e.length<=1)return e;for(var t=a(e)?o():[],r=0;r<e.length;r++){for(var n=e[r],i=!1,s=0;s<t.length;s++)if(l(n,t[s])){i=!0;break}i||t.push(n)}return t}}function*ye(e,t){var r={};for(var n in e){var i=e[n],o=X(t,i,n,e);V(yield*t.apply(this,o))&&(r[n]=i)}return 0===Object.keys(r).length&&(r=void 0),r}return{sum:h,count:d,max:v,min:g,average:y,string:m,substring:b,substringBefore:k,substringAfter:x,lowercase:w,uppercase:E,length:A,trim:S,pad:D,match:C,contains:O,replace:P,split:R,join:_,formatNumber:q,formatBase:z,number:L,floor:H,ceil:W,round:Y,abs:$,sqrt:Z,power:J,random:G,boolean:V,not:B,map:Q,zip:te,filter:K,single:ee,foldLeft:re,sift:ye,keys:ne,lookup:ie,append:oe,exists:ae,spread:se,merge:ue,reverse:ce,each:pe,error:le,assert:fe,type:he,sort:de,shuffle:ve,distinct:ge,base64encode:F,base64decode:j,encodeUrlComponent:N,encodeUrl:M,decodeUrlComponent:U,decodeUrl:I}})();t.exports=i}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":6}],3:[function(e,t,r){var n=e("./datetime"),i=e("./functions"),o=e("./utils"),a=e("./parser"),s=e("./signature"),u=function(){"use strict";var e=o.isNumeric,t=o.isArrayOfStrings,r=o.isArrayOfNumbers,u=o.createSequence,c=o.isSequence,p=o.isFunction,l=o.isLambda,f=o.isIterable,h=o.getFunctionArity,d=o.isDeepEqual,v=pe(null);function*g(e,t,r){var n,i=r.lookup("__evaluate_entry");switch(i&&i(e,t,r),e.type){case"path":n=yield*y(e,t,r);break;case"binary":n=yield*E(e,t,r);break;case"unary":n=yield*A(e,t,r);break;case"name":n=S(e,t,r);break;case"string":case"number":case"value":n=D(e,t,r);break;case"wildcard":n=T(e,t,r);break;case"descendant":n=C(e,t,r);break;case"parent":n=r.lookup(e.slot.label);break;case"condition":n=yield*$(e,t,r);break;case"block":n=yield*H(e,t,r);break;case"bind":n=yield*L(e,t,r);break;case"regex":n=W(e,t,r);break;case"function":n=yield*B(e,t,r);break;case"variable":n=Y(e,t,r);break;case"lambda":n=K(e,t,r);break;case"partial":n=yield*ee(e,t,r);break;case"apply":n=yield*V(e,t,r);break;case"transform":n=J(e,t,r)}if(!r.async||null!=n&&"function"==typeof n.then||(n=Promise.resolve(n)),r.async&&"function"==typeof n.then&&e.nextFunction&&"function"==typeof n[e.nextFunction]||(n=yield n),Object.prototype.hasOwnProperty.call(e,"predicate"))for(var o=0;o<e.predicate.length;o++)n=yield*w(e.predicate[o].expr,n,r);"path"!==e.type&&Object.prototype.hasOwnProperty.call(e,"group")&&(n=yield*_(e.group,n,r));var a=r.lookup("__evaluate_exit");return a&&a(e,t,r,n),n&&c(n)&&!n.tupleStream&&(e.keepArray&&(n.keepSingleton=!0),0===n.length?n=void 0:1===n.length&&(n=n.keepSingleton?n:n[0])),n}function*y(e,t,r){var n,i;n=Array.isArray(t)&&"variable"!==e.steps[0].type?t:u(t);for(var o=!1,a=void 0,s=0;s<e.steps.length;s++){var c=e.steps[s];if(c.tuple&&(o=!0),0===s&&c.consarray?i=yield*g(c,n,r):o?a=yield*x(c,n,a,r):i=yield*b(c,n,r,s===e.steps.length-1),!o&&(void 0===i||0===i.length))break;void 0===c.focus&&(n=i)}if(o)if(e.tuple)i=a;else for(i=u(),s=0;s<a.length;s++)i.push(a[s]["@"]);return e.keepSingletonArray&&(Array.isArray(i)&&i.cons&&!i.sequence&&(i=u(i)),i.keepSingleton=!0),e.hasOwnProperty("group")&&(i=yield*_(e.group,o?a:i,r)),i}function m(e,t){var r=pe(e);for(const e in t)r.bind(e,t[e]);return r}function*b(e,t,r,n){var i;if("sort"===e.type)return i=yield*Z(e,t,r),e.stages&&(i=yield*k(e.stages,i,r)),i;i=u();for(var o=0;o<t.length;o++){var a=yield*g(e,t[o],r);if(e.stages)for(var s=0;s<e.stages.length;s++)a=yield*w(e.stages[s].expr,a,r);void 0!==a&&i.push(a)}var p=u();return n&&1===i.length&&Array.isArray(i[0])&&!c(i[0])?p=i[0]:i.forEach((function(e){!Array.isArray(e)||e.cons?p.push(e):e.forEach((e=>p.push(e)))})),p}function*k(e,t,r){for(var n=t,i=0;i<e.length;i++){var o=e[i];switch(o.type){case"filter":n=yield*w(o.expr,n,r);break;case"index":for(var a=0;a<n.length;a++)n[a][o.value]=a}}return n}function*x(e,t,r,n){var i;if("sort"===e.type){if(r)i=yield*Z(e,r,n);else{var o=yield*Z(e,t,n);(i=u()).tupleStream=!0;for(var a=0;a<o.length;a++){var s={"@":o[a]};s[e.index]=a,i.push(s)}}return e.stages&&(i=yield*k(e.stages,i,n)),i}(i=u()).tupleStream=!0;var c=n;void 0===r&&(r=t.map((e=>({"@":e}))));for(var p=0;p<r.length;p++){c=m(n,r[p]);var l=yield*g(e,r[p]["@"],c);if(void 0!==l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++)s={},Object.assign(s,r[p]),l.tupleStream?Object.assign(s,l[f]):(e.focus?(s[e.focus]=l[f],s["@"]=r[p]["@"]):s["@"]=l[f],e.index&&(s[e.index]=f),e.ancestor&&(s[e.ancestor.label]=r[p]["@"])),i.push(s)}}return e.stages&&(i=yield*k(e.stages,i,n)),i}function*w(t,n,o){var a=u();if(n&&n.tupleStream&&(a.tupleStream=!0),Array.isArray(n)||(n=u(n)),"number"===t.type){var s=Math.floor(t.value);s<0&&(s=n.length+s),void 0!==(c=n[s])&&(Array.isArray(c)?a=c:a.push(c))}else for(s=0;s<n.length;s++){var c,p=c=n[s],l=o;n.tupleStream&&(p=c["@"],l=m(o,c));var f=yield*g(t,p,l);e(f)&&(f=[f]),r(f)?f.forEach((function(e){var t=Math.floor(e);t<0&&(t=n.length+t),t===s&&a.push(c)})):i.boolean(f)&&a.push(c)}return a}function*E(e,t,r){var n,i=yield*g(e.lhs,t,r),o=e.value,a=function*(){return yield*g(e.rhs,t,r)};if("and"===o||"or"===o)try{return yield*U(i,a,o)}catch(t){throw t.position=e.position,t.token=o,t}var s=yield*a();try{switch(o){case"+":case"-":case"*":case"/":case"%":n=F(i,s,o);break;case"=":case"!=":n=j(i,s,o);break;case"<":case"<=":case">":case">=":n=N(i,s,o);break;case"&":n=R(i,s);break;case"..":n=z(i,s);break;case"in":n=M(i,s)}}catch(t){throw t.position=e.position,t.token=o,t}return n}function*A(t,r,n){var o;switch(t.value){case"-":if(void 0===(o=yield*g(t.expression,r,n)))o=void 0;else{if(!e(o))throw{code:"D1002",stack:(new Error).stack,position:t.position,token:t.value,value:o};o=-o}break;case"[":o=[];for(var a=0;a<t.expressions.length;a++){var s=t.expressions[a],u=yield*g(s,r,n);void 0!==u&&("["===s.value?o.push(u):o=i.append(o,u))}t.consarray&&Object.defineProperty(o,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":o=yield*_(t,r,n)}return o}function S(e,t,r){return i.lookup(t,e.value)}function D(e){return e.value}function T(e,t){var r=u();return Array.isArray(t)&&t.outerWrapper&&t.length>0&&(t=t[0]),null!==t&&"object"==typeof t&&Object.keys(t).forEach((function(e){var n=t[e];Array.isArray(n)?(n=O(n),r=i.append(r,n)):r.push(n)})),r}function O(e,t){return void 0===t&&(t=[]),Array.isArray(e)?e.forEach((function(e){O(e,t)})):t.push(e),t}function C(e,t){var r,n=u();return void 0!==t&&(P(t,n),r=1===n.length?n[0]:n),r}function P(e,t){Array.isArray(e)||t.push(e),Array.isArray(e)?e.forEach((function(e){P(e,t)})):null!==e&&"object"==typeof e&&Object.keys(e).forEach((function(r){P(e[r],t)}))}function F(t,r,n){var i;if(void 0!==t&&!e(t))throw{code:"T2001",stack:(new Error).stack,value:t};if(void 0!==r&&!e(r))throw{code:"T2002",stack:(new Error).stack,value:r};if(void 0===t||void 0===r)return i;switch(n){case"+":i=t+r;break;case"-":i=t-r;break;case"*":i=t*r;break;case"/":i=t/r;break;case"%":i=t%r}return i}function j(e,t,r){var n;if(void 0===e||void 0===t)return!1;switch(r){case"=":n=d(e,t);break;case"!=":n=!d(e,t)}return n}function N(e,t,r){var n,i=typeof e,o=typeof t;if("undefined"!==i&&"string"!==i&&"number"!==i||"undefined"!==o&&"string"!==o&&"number"!==o)throw{code:"T2010",stack:(new Error).stack,value:"string"!==i&&"number"!==i?e:t};if("undefined"!==i&&"undefined"!==o){if(i!==o)throw{code:"T2009",stack:(new Error).stack,value:e,value2:t};switch(r){case"<":n=e<t;break;case"<=":n=e<=t;break;case">":n=e>t;break;case">=":n=e>=t}return n}}function M(e,t){var r=!1;if(void 0===e||void 0===t)return!1;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)if(t[n]===e){r=!0;break}return r}function*U(e,t,r){var n,i=I(e);switch(r){case"and":n=i&&I(yield*t());break;case"or":n=i||I(yield*t())}return n}function I(e){var t=i.boolean(e);return void 0!==t&&t}function R(e,t){var r="",n="";return void 0!==e&&(r=i.string(e)),void 0!==t&&(n=i.string(t)),r.concat(n)}function*_(e,t,r){var n={},o={},a=!(!t||!t.tupleStream);Array.isArray(t)||(t=u(t)),0===t.length&&t.push(void 0);for(var s=0;s<t.length;s++)for(var c=t[s],p=a?m(r,c):r,l=0;l<e.lhs.length;l++){var f=e.lhs[l],h=yield*g(f[0],a?c["@"]:c,p);if("string"!=typeof h&&void 0!==h)throw{code:"T1003",stack:(new Error).stack,position:e.position,value:h};if(void 0!==h){var d={data:c,exprIndex:l};if(o.hasOwnProperty(h)){if(o[h].exprIndex!==l)throw{code:"D1009",stack:(new Error).stack,position:e.position,value:h};o[h].data=i.append(o[h].data,c)}else o[h]=d}}for(h in o){var v=(d=o[h]).data;if(p=r,a){var y=q(d.data);v=y["@"],delete y["@"],p=m(r,y)}var b=yield*g(e.lhs[d.exprIndex][1],v,p);void 0!==b&&(n[h]=b)}return n}function q(e){if(!Array.isArray(e))return e;var t={};Object.assign(t,e[0]);for(var r=1;r<e.length;r++)for(const n in e[r])t[n]=i.append(t[n],e[r][n]);return t}function z(e,t){var r;if(void 0!==e&&!Number.isInteger(e))throw{code:"T2003",stack:(new Error).stack,value:e};if(void 0!==t&&!Number.isInteger(t))throw{code:"T2004",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return r;if(e>t)return r;var n=t-e+1;if(n>1e7)throw{code:"D2014",stack:(new Error).stack,value:n};r=new Array(n);for(var i=e,o=0;i<=t;i++,o++)r[o]=i;return r.sequence=!0,r}function*L(e,t,r){var n=yield*g(e.rhs,t,r);return r.bind(e.lhs.value,n),n}function*$(e,t,r){var n,o=yield*g(e.condition,t,r);return i.boolean(o)?n=yield*g(e.then,t,r):void 0!==e.else&&(n=yield*g(e.else,t,r)),n}function*H(e,t,r){for(var n,i=pe(r),o=0;o<e.expressions.length;o++)n=yield*g(e.expressions[o],t,i);return n}function W(e){var t=new he.RegexEngine(e.value),r=function(n,i){var o;t.lastIndex=i||0;var a=t.exec(n);if(null!==a){if(o={match:a[0],start:a.index,end:a.index+a[0].length,groups:[]},a.length>1)for(var s=1;s<a.length;s++)o.groups.push(a[s]);o.next=function(){if(!(t.lastIndex>=n.length)){var i=r(n,t.lastIndex);if(i&&""===i.match)throw{code:"D1004",stack:(new Error).stack,position:e.position,value:e.value.source};return i}}}return o};return r}function Y(e,t,r){return""===e.value?t&&t.outerWrapper?t[0]:t:r.lookup(e.value)}function*Z(e,t,r){var n=t,o=!!t.tupleStream,a=function*(t,n){for(var i=0,a=0;0===i&&a<e.terms.length;a++){var s=e.terms[a],u=t,c=r;o&&(u=t["@"],c=m(r,t));var p=yield*g(s.expression,u,c);u=n,c=r,o&&(u=n["@"],c=m(r,n));var l=yield*g(s.expression,u,c),f=typeof p,h=typeof l;if("undefined"!==f)if("undefined"!==h){if("string"!==f&&"number"!==f||"string"!==h&&"number"!==h)throw{code:"T2008",stack:(new Error).stack,position:e.position,value:"string"!==f&&"number"!==f?p:l};if(f!==h)throw{code:"T2007",stack:(new Error).stack,position:e.position,value:p,value2:l};p!==l&&(i=p<l?-1:1,!0===s.descending&&(i=-i))}else i=-1;else i="undefined"===h?0:1}return 1===i},s={environment:r,input:t};return yield*i.sort.apply(s,[n,a])}function J(e,r,n){return se((function*(r){if(void 0!==r){var i=n.lookup("clone");if(!p(i))throw{code:"T2013",stack:(new Error).stack,position:e.position};var o=yield*X(i,[r],null,n),a=yield*g(e.pattern,o,n);if(void 0!==a){Array.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++){var u=a[s],c=yield*g(e.update,u,n),l=typeof c;if("undefined"!==l){if("object"!==l||null===c||Array.isArray(c))throw{code:"T2011",stack:(new Error).stack,position:e.update.position,value:c};for(var f in c)u[f]=c[f]}if(void 0!==e.delete){var h=yield*g(e.delete,u,n);if(void 0!==h){var d=h;if(Array.isArray(h)||(h=[h]),!t(h))throw{code:"T2012",stack:(new Error).stack,position:e.delete.position,value:d};for(var v=0;v<h.length;v++)"object"==typeof u&&null!==u&&delete u[h[v]]}}}}return o}}),"<(oa):o>")}var G=a("function($f, $g) { function($x){ $g($f($x)) } }");function*V(e,t,r){var n,i=yield*g(e.lhs,t,r);if("function"===e.rhs.type)n=yield*B(e.rhs,t,r,{context:i});else{var o=yield*g(e.rhs,t,r);if(!p(o))throw{code:"T2006",stack:(new Error).stack,position:e.position,value:o};if(p(i)){var a=yield*g(G,null,r);n=yield*X(a,[i,o],null,r)}else n=yield*X(o,[i],null,r)}return n}function*B(e,t,r,n){var i,o=yield*g(e.procedure,t,r);if(void 0===o&&"path"===e.procedure.type&&r.lookup(e.procedure.steps[0].value))throw{code:"T1005",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};var a=[];void 0!==n&&a.push(n.context);for(var s=0;s<e.arguments.length;s++){const n=yield*g(e.arguments[s],t,r);if(p(n)){const e=function*(...e){return yield*X(n,e,null,r)};e.arity=h(n),a.push(e)}else a.push(n)}var u="path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value;try{"object"==typeof o&&(o.token=u,o.position=e.position),i=yield*X(o,a,t,r)}catch(t){throw t.position||(t.position=e.position),t.token||(t.token=u),t}return i}function*X(e,t,r,n){var i;for(i=yield*Q(e,t,r,n);l(i)&&!0===i.thunk;){var o=yield*g(i.body.procedure,i.input,i.environment);"variable"===i.body.procedure.type&&(o.token=i.body.procedure.value),o.position=i.body.procedure.position;for(var a=[],s=0;s<i.body.arguments.length;s++)a.push(yield*g(i.body.arguments[s],i.input,i.environment));i=yield*Q(o,a,r,n)}return i}function*Q(e,t,r,n){var i;try{var o=t;if(e&&(o=te(e.signature,t,r)),l(e))i=yield*re(e,o);else if(e&&!0===e._jsonata_function){var a={environment:n,input:r};i=e.implementation.apply(a,o),f(i)&&(i=yield*i)}else{if("function"!=typeof e)throw{code:"T1006",stack:(new Error).stack};i=e.apply(r,o),f(i)&&(i=yield*i)}}catch(t){throw e&&(void 0===t.token&&void 0!==e.token&&(t.token=e.token),t.position=e.position),t}return i}function K(e,t,r){var n={_jsonata_lambda:!0,input:t,environment:r,arguments:e.arguments,signature:e.signature,body:e.body};return!0===e.thunk&&(n.thunk=!0),n.apply=function*(e,r){return yield*X(n,r,t,e.environment)},n}function*ee(e,t,r){for(var n,i=[],o=0;o<e.arguments.length;o++){var a=e.arguments[o];"operator"===a.type&&"?"===a.value?i.push(a):i.push(yield*g(a,t,r))}var s=yield*g(e.procedure,t,r);if(void 0===s&&"path"===e.procedure.type&&r.lookup(e.procedure.steps[0].value))throw{code:"T1007",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};if(l(s))n=ne(s,i);else if(s&&!0===s._jsonata_function)n=ie(s.implementation,i);else{if("function"!=typeof s)throw{code:"T1008",stack:(new Error).stack,position:e.position,token:"path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value};n=ie(s,i)}return n}function te(e,t,r){return void 0===e?t:e.validate(t,r)}function*re(e,t){var r=pe(e.environment);return e.arguments.forEach((function(e,n){r.bind(e.value,t[n])})),"function"==typeof e.body?yield*oe(e.body,r):yield*g(e.body,e.input,r)}function ne(e,t){var r=pe(e.environment),n=[];return e.arguments.forEach((function(e,i){var o=t[i];o&&"operator"===o.type&&"?"===o.value?n.push(e):r.bind(e.value,o)})),{_jsonata_lambda:!0,input:e.input,environment:r,arguments:n,body:e.body}}function ie(e,t){var r=ae(e),n="function("+(r=r.map((function(e){return"$"+e.trim()}))).join(", ")+"){ _ }",i=a(n);return i.body=e,ne(i,t)}function*oe(e,t){var r=ae(e).map((function(e){return t.lookup(e.trim())})),n={environment:t},i=e.apply(n,r);return f(i)&&(i=yield*i),i}function ae(e){var t=e.toString();return/\(([^)]*)\)/.exec(t)[1].split(",")}function se(e,t){var r={_jsonata_function:!0,implementation:e};return void 0!==t&&(r.signature=s(t)),r}function*ue(e,t){if(void 0!==e){var r=this.input;void 0!==t&&(r=t,Array.isArray(r)&&!c(r)&&((r=u(r)).outerWrapper=!0));try{var n=a(e,!1)}catch(e){throw fe(e),{stack:(new Error).stack,code:"D3120",value:e.message,error:e}}try{var i=yield*g(n,r,this.environment)}catch(e){throw fe(e),{stack:(new Error).stack,code:"D3121",value:e.message,error:e}}return i}}function ce(e){if(void 0!==e)return JSON.parse(i.string(e))}function pe(e){var t={};return{bind:function(e,r){t[e]=r},lookup:function(r){var n;return t.hasOwnProperty(r)?n=t[r]:e&&(n=e.lookup(r)),n},timestamp:e?e.timestamp:null,async:!!e&&e.async,global:e?e.global:{ancestry:[null]}}}v.bind("sum",se(i.sum,"<a<n>:n>")),v.bind("count",se(i.count,"<a:n>")),v.bind("max",se(i.max,"<a<n>:n>")),v.bind("min",se(i.min,"<a<n>:n>")),v.bind("average",se(i.average,"<a<n>:n>")),v.bind("string",se(i.string,"<x-b?:s>")),v.bind("substring",se(i.substring,"<s-nn?:s>")),v.bind("substringBefore",se(i.substringBefore,"<s-s:s>")),v.bind("substringAfter",se(i.substringAfter,"<s-s:s>")),v.bind("lowercase",se(i.lowercase,"<s-:s>")),v.bind("uppercase",se(i.uppercase,"<s-:s>")),v.bind("length",se(i.length,"<s-:n>")),v.bind("trim",se(i.trim,"<s-:s>")),v.bind("pad",se(i.pad,"<s-ns?:s>")),v.bind("match",se(i.match,"<s-f<s:o>n?:a<o>>")),v.bind("contains",se(i.contains,"<s-(sf):b>")),v.bind("replace",se(i.replace,"<s-(sf)(sf)n?:s>")),v.bind("split",se(i.split,"<s-(sf)n?:a<s>>")),v.bind("join",se(i.join,"<a<s>s?:s>")),v.bind("formatNumber",se(i.formatNumber,"<n-so?:s>")),v.bind("formatBase",se(i.formatBase,"<n-n?:s>")),v.bind("formatInteger",se(n.formatInteger,"<n-s:s>")),v.bind("parseInteger",se(n.parseInteger,"<s-s:n>")),v.bind("number",se(i.number,"<(nsb)-:n>")),v.bind("floor",se(i.floor,"<n-:n>")),v.bind("ceil",se(i.ceil,"<n-:n>")),v.bind("round",se(i.round,"<n-n?:n>")),v.bind("abs",se(i.abs,"<n-:n>")),v.bind("sqrt",se(i.sqrt,"<n-:n>")),v.bind("power",se(i.power,"<n-n:n>")),v.bind("random",se(i.random,"<:n>")),v.bind("boolean",se(i.boolean,"<x-:b>")),v.bind("not",se(i.not,"<x-:b>")),v.bind("map",se(i.map,"<af>")),v.bind("zip",se(i.zip,"<a+>")),v.bind("filter",se(i.filter,"<af>")),v.bind("single",se(i.single,"<af?>")),v.bind("reduce",se(i.foldLeft,"<afj?:j>")),v.bind("sift",se(i.sift,"<o-f?:o>")),v.bind("keys",se(i.keys,"<x-:a<s>>")),v.bind("lookup",se(i.lookup,"<x-s:x>")),v.bind("append",se(i.append,"<xx:a>")),v.bind("exists",se(i.exists,"<x:b>")),v.bind("spread",se(i.spread,"<x-:a<o>>")),v.bind("merge",se(i.merge,"<a<o>:o>")),v.bind("reverse",se(i.reverse,"<a:a>")),v.bind("each",se(i.each,"<o-f:a>")),v.bind("error",se(i.error,"<s?:x>")),v.bind("assert",se(i.assert,"<bs?:x>")),v.bind("type",se(i.type,"<x:s>")),v.bind("sort",se(i.sort,"<af?:a>")),v.bind("shuffle",se(i.shuffle,"<a:a>")),v.bind("distinct",se(i.distinct,"<x:x>")),v.bind("base64encode",se(i.base64encode,"<s-:s>")),v.bind("base64decode",se(i.base64decode,"<s-:s>")),v.bind("encodeUrlComponent",se(i.encodeUrlComponent,"<s-:s>")),v.bind("encodeUrl",se(i.encodeUrl,"<s-:s>")),v.bind("decodeUrlComponent",se(i.decodeUrlComponent,"<s-:s>")),v.bind("decodeUrl",se(i.decodeUrl,"<s-:s>")),v.bind("eval",se(ue,"<sx?:x>")),v.bind("toMillis",se(n.toMillis,"<s-s?:n>")),v.bind("fromMillis",se(n.fromMillis,"<n-s?s?:s>")),v.bind("clone",se(ce,"<(oa)-:o>"));var le={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function fe(e){var t=le[e.code];if(void 0!==t){var r=t.replace(/\{\{\{([^}]+)}}}/g,(function(){return e[arguments[1]]}));r=r.replace(/\{\{([^}]+)}}/g,(function(){return JSON.stringify(e[arguments[1]])})),e.message=r}}function he(e,t){var r,i;try{r=a(e,t&&t.recover),i=r.errors,delete r.errors}catch(e){throw fe(e),e}var o=pe(v),s=new Date;return o.bind("now",se((function(e,t){return n.fromMillis(s.getTime(),e,t)}),"<s?s?:s>")),o.bind("millis",se((function(){return s.getTime()}),"<:n>")),t&&t.RegexEngine?he.RegexEngine=t.RegexEngine:he.RegexEngine=RegExp,{evaluate:function(e,t,n){if(void 0!==i){var a={code:"S0500",position:0};throw fe(a),a}var p,l,f;if(void 0!==t)for(var h in p=pe(o),t)p.bind(h,t[h]);else p=o;if(p.bind("$",e),s=new Date,p.timestamp=s,Array.isArray(e)&&!c(e)&&((e=u(e)).outerWrapper=!0),"function"==typeof n){p.async=!0;var d=function(e){fe(e),n(e,null)},v=function(e){(l=f.next(e)).done?n(null,l.value):l.value.then(v).catch(d)};f=g(r,e,p),(l=f.next()).value.then(v).catch(d)}else try{for(f=g(r,e,p),l=f.next();!l.done;)l=f.next(l.value);return l.value}catch(a){throw fe(a),a}},assign:function(e,t){o.bind(e,t)},registerFunction:function(e,t,r){var n=se(t,r);o.bind(e,n)},ast:function(){return r},errors:function(){return i}}}return he.parser=a,he}();t.exports=u},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(e,t,r){var n=e("./signature");const i=(()=>{"use strict";var e={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},r=function(r){var n=0,i=r.length,o=function(e,t){return{type:e,value:t,position:n}},a=function(){for(var e,t,o=n,a=0;n<i;){var s=r.charAt(n);if("/"===s&&"\\"!==r.charAt(n-1)&&0===a){if(""===(e=r.substring(o,n)))throw{code:"S0301",stack:(new Error).stack,position:n};for(n++,s=r.charAt(n),o=n;"i"===s||"m"===s;)n++,s=r.charAt(n);return t=r.substring(o,n)+"g",new RegExp(e,t)}"("!==s&&"["!==s&&"{"!==s||"\\"===r.charAt(n-1)||a++,")"!==s&&"]"!==s&&"}"!==s||"\\"===r.charAt(n-1)||a--,n++}throw{code:"S0302",stack:(new Error).stack,position:n}},s=function(u){if(n>=i)return null;for(var c=r.charAt(n);n<i&&" \t\n\r\v".indexOf(c)>-1;)n++,c=r.charAt(n);if("/"===c&&"*"===r.charAt(n+1)){var p=n;for(n+=2,c=r.charAt(n);"*"!==c||"/"!==r.charAt(n+1);)if(c=r.charAt(++n),n>=i)throw{code:"S0106",stack:(new Error).stack,position:p};return n+=2,c=r.charAt(n),s(u)}if(!0!==u&&"/"===c)return n++,o("regex",a());if("."===c&&"."===r.charAt(n+1))return n+=2,o("operator","..");if(":"===c&&"="===r.charAt(n+1))return n+=2,o("operator",":=");if("!"===c&&"="===r.charAt(n+1))return n+=2,o("operator","!=");if(">"===c&&"="===r.charAt(n+1))return n+=2,o("operator",">=");if("<"===c&&"="===r.charAt(n+1))return n+=2,o("operator","<=");if("*"===c&&"*"===r.charAt(n+1))return n+=2,o("operator","**");if("~"===c&&">"===r.charAt(n+1))return n+=2,o("operator","~>");if(Object.prototype.hasOwnProperty.call(e,c))return n++,o("operator",c);if('"'===c||"'"===c){var l=c;n++;for(var f="";n<i;){if("\\"===(c=r.charAt(n)))if(n++,c=r.charAt(n),Object.prototype.hasOwnProperty.call(t,c))f+=t[c];else{if("u"!==c)throw{code:"S0103",stack:(new Error).stack,position:n,token:c};var h=r.substr(n+1,4);if(!/^[0-9a-fA-F]+$/.test(h))throw{code:"S0104",stack:(new Error).stack,position:n};var d=parseInt(h,16);f+=String.fromCharCode(d),n+=4}else{if(c===l)return n++,o("string",f);f+=c}n++}throw{code:"S0101",stack:(new Error).stack,position:n}}var v,g=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(r.substring(n));if(null!==g){var y=parseFloat(g[0]);if(!isNaN(y)&&isFinite(y))return n+=g[0].length,o("number",y);throw{code:"S0102",stack:(new Error).stack,position:n,token:g[0]}}if("`"===c){n++;var m=r.indexOf("`",n);if(-1!==m)return v=r.substring(n,m),n=m+1,o("name",v);throw n=i,{code:"S0105",stack:(new Error).stack,position:n}}for(var b,k=n;;)if(b=r.charAt(k),k===i||" \t\n\r\v".indexOf(b)>-1||Object.prototype.hasOwnProperty.call(e,b)){if("$"===r.charAt(n))return v=r.substring(n+1,k),n=k,o("variable",v);switch(v=r.substring(n,k),n=k,v){case"or":case"in":case"and":return o("operator",v);case"true":return o("value",!0);case"false":return o("value",!1);case"null":return o("value",null);default:return n===i&&""===v?null:o("name",v)}}else k++};return s};return function(t,i){var o,a,s={},u=[],c=function(){var e=[];"(end)"!==o.id&&e.push({type:o.type,value:o.value,position:o.position});for(var t=a();null!==t;)e.push(t),t=a();return e},p={nud:function(){var e={code:"S0211",token:this.value,position:this.position};if(i)return e.remaining=c(),e.type="error",u.push(e),e;throw e.stack=(new Error).stack,e}},l=function(e,t){var r=s[e];return t=t||0,r?t>=r.lbp&&(r.lbp=t):((r=Object.create(p)).id=r.value=e,r.lbp=t,s[e]=r),r},f=function(e){if(i){e.remaining=c(),u.push(e);var t=s["(error)"];return(o=Object.create(t)).error=e,o.type="(error)",o}throw e.stack=(new Error).stack,e},h=function(e,r){if(e&&o.id!==e){var n={code:"(end)"===o.id?"S0203":"S0202",position:o.position,token:o.value,value:e};return f(n)}var i=a(r);if(null===i)return(o=s["(end)"]).position=t.length,o;var u,c=i.value,p=i.type;switch(p){case"name":case"variable":u=s["(name)"];break;case"operator":if(!(u=s[c]))return f({code:"S0204",stack:(new Error).stack,position:i.position,token:c});break;case"string":case"number":case"value":u=s["(literal)"];break;case"regex":p="regex",u=s["(regex)"];break;default:return f({code:"S0205",stack:(new Error).stack,position:i.position,token:c})}return(o=Object.create(u)).value=c,o.type=p,o.position=i.position,o},d=function(e){var t,r=o;for(h(null,!0),t=r.nud();e<o.lbp;)r=o,h(),t=r.led(t);return t},v=function(e){l(e,0).nud=function(){return this}},g=function(t,r,n){var i=r||e[t],o=l(t,i);return o.led=n||function(e){return this.lhs=e,this.rhs=d(i),this.type="binary",this},o},y=function(e,t,r){var n=l(e,t);return n.led=r,n},m=function(e,t){var r=l(e);return r.nud=t||function(){return this.expression=d(70),this.type="unary",this},r};v("(end)"),v("(name)"),v("(literal)"),v("(regex)"),l(":"),l(";"),l(","),l(")"),l("]"),l("}"),l(".."),g("."),g("+"),g("-"),g("*"),g("/"),g("%"),g("="),g("<"),g(">"),g("!="),g("<="),g(">="),g("&"),g("and"),g("or"),g("in"),v("and"),v("or"),v("in"),m("-"),g("~>"),y("(error)",10,(function(e){return this.lhs=e,this.error=o.error,this.remaining=c(),this.type="error",this})),m("*",(function(){return this.type="wildcard",this})),m("**",(function(){return this.type="descendant",this})),m("%",(function(){return this.type="parent",this})),g("(",e["("],(function(e){if(this.procedure=e,this.type="function",this.arguments=[],")"!==o.id)for(;"operator"===o.type&&"?"===o.id?(this.type="partial",this.arguments.push(o),h("?")):this.arguments.push(d(0)),","===o.id;)h(",");if(h(")",!0),"name"===e.type&&("function"===e.value||"Î»"===e.value)){if(this.arguments.forEach((function(e,t){if("variable"!==e.type)return f({code:"S0208",stack:(new Error).stack,position:e.position,token:e.value,value:t+1})})),this.type="lambda","<"===o.id){for(var t=o.position,r=1,i="<";r>0&&"{"!==o.id&&"(end)"!==o.id;){var a=h();">"===a.id?r--:"<"===a.id&&r++,i+=a.value}h(">");try{this.signature=n(i)}catch(e){return e.position=t+e.offset,f(e)}}h("{"),this.body=d(0),h("}")}return this})),m("(",(function(){for(var e=[];")"!==o.id&&(e.push(d(0)),";"===o.id);)h(";");return h(")",!0),this.type="block",this.expressions=e,this})),m("[",(function(){var e=[];if("]"!==o.id)for(;;){var t=d(0);if(".."===o.id){var r={type:"binary",value:"..",position:o.position,lhs:t};h(".."),r.rhs=d(0),t=r}if(e.push(t),","!==o.id)break;h(",")}return h("]",!0),this.expressions=e,this.type="unary",this})),g("[",e["["],(function(t){if("]"===o.id){for(var r=t;r&&"binary"===r.type&&"["===r.value;)r=r.lhs;return r.keepArray=!0,h("]"),t}return this.lhs=t,this.rhs=d(e["]"]),this.type="binary",h("]",!0),this})),g("^",e["^"],(function(e){h("(");for(var t=[];;){var r={descending:!1};if("<"===o.id?h("<"):">"===o.id&&(r.descending=!0,h(">")),r.expression=d(0),t.push(r),","!==o.id)break;h(",")}return h(")"),this.lhs=e,this.rhs=t,this.type="binary",this}));var b=function(e){var t=[];if("}"!==o.id)for(;;){var r=d(0);h(":");var n=d(0);if(t.push([r,n]),","!==o.id)break;h(",")}return h("}",!0),void 0===e?(this.lhs=t,this.type="unary"):(this.lhs=e,this.rhs=t,this.type="binary"),this};m("{",b),g("{",e["{"],b),y(":=",e[":="],(function(t){return"variable"!==t.type?f({code:"S0212",stack:(new Error).stack,position:t.position,token:t.value}):(this.lhs=t,this.rhs=d(e[":="]-1),this.type="binary",this)})),g("@",e["@"],(function(t){return this.lhs=t,this.rhs=d(e["@"]),"variable"!==this.rhs.type?f({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)})),g("#",e["#"],(function(t){return this.lhs=t,this.rhs=d(e["#"]),"variable"!==this.rhs.type?f({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)})),g("?",e["?"],(function(e){return this.type="condition",this.condition=e,this.then=d(0),":"===o.id&&(h(":"),this.else=d(0)),this})),m("|",(function(){return this.type="transform",this.pattern=d(0),h("|"),this.update=d(0),","===o.id&&(h(","),this.delete=d(0)),h("|"),this}));var k=function(e){var t;if("function"!==e.type||e.predicate)if("condition"===e.type)e.then=k(e.then),void 0!==e.else&&(e.else=k(e.else)),t=e;else if("block"===e.type){var r=e.expressions.length;r>0&&(e.expressions[r-1]=k(e.expressions[r-1])),t=e}else t=e;else{var n={type:"lambda",thunk:!0,arguments:[],position:e.position};n.body=e,t=n}return t},x=0,w=0,E=[],A=function(e,t){switch(e.type){case"name":case"wildcard":t.level--,0===t.level&&(void 0===e.ancestor||(E[t.index].slot.label=e.ancestor.label),e.ancestor=t,e.tuple=!0);break;case"parent":t.level++;break;case"block":e.expressions.length>0&&(e.tuple=!0,t=A(e.expressions[e.expressions.length-1],t));break;case"path":e.tuple=!0;var r=e.steps.length-1;for(t=A(e.steps[r--],t);t.level>0&&r>=0;)t=A(e.steps[r--],t);break;default:throw{code:"S0217",token:e.type,position:e.position}}return t},S=function(e,t){if(void 0!==t.seekingParent||"parent"===t.type){var r=void 0!==t.seekingParent?t.seekingParent:[];"parent"===t.type&&r.push(t.slot),void 0===e.seekingParent?e.seekingParent=r:Array.prototype.push.apply(e.seekingParent,r)}},D=function(e){var t=e.steps.length-1,r=e.steps[t],n=void 0!==r.seekingParent?r.seekingParent:[];"parent"===r.type&&n.push(r.slot);for(var i=0;i<n.length;i++){var o=n[i];for(t=e.steps.length-2;o.level>0;){if(t<0){void 0===e.seekingParent?e.seekingParent=[o]:e.seekingParent.push(o);break}for(var a=e.steps[t--];t>=0&&a.focus&&e.steps[t].focus;)a=e.steps[t--];o=A(a,o)}}},T=function(e){var t;switch(e.type){case"binary":switch(e.value){case".":var r=T(e.lhs);t="path"===r.type?r:{type:"path",steps:[r]},"parent"===r.type&&(t.seekingParent=[r.slot]);var n=T(e.rhs);"function"===n.type&&"path"===n.procedure.type&&1===n.procedure.steps.length&&"name"===n.procedure.steps[0].type&&"function"===t.steps[t.steps.length-1].type&&(t.steps[t.steps.length-1].nextFunction=n.procedure.steps[0].value),"path"===n.type?Array.prototype.push.apply(t.steps,n.steps):(void 0!==n.predicate&&(n.stages=n.predicate,delete n.predicate),t.steps.push(n)),t.steps.filter((function(e){if("number"===e.type||"value"===e.type)throw{code:"S0213",stack:(new Error).stack,position:e.position,value:e.value};return"string"===e.type})).forEach((function(e){e.type="name"})),t.steps.filter((function(e){return!0===e.keepArray})).length>0&&(t.keepSingletonArray=!0);var o=t.steps[0];"unary"===o.type&&"["===o.value&&(o.consarray=!0);var a=t.steps[t.steps.length-1];"unary"===a.type&&"["===a.value&&(a.consarray=!0),D(t);break;case"[":var s=t=T(e.lhs),c="predicate";if("path"===t.type&&(s=t.steps[t.steps.length-1],c="stages"),void 0!==s.group)throw{code:"S0209",stack:(new Error).stack,position:e.position};void 0===s[c]&&(s[c]=[]);var p=T(e.rhs);void 0!==p.seekingParent&&(p.seekingParent.forEach((e=>{1===e.level?A(s,e):e.level--})),S(s,p)),s[c].push({type:"filter",expr:p,position:e.position});break;case"{":if(void 0!==(t=T(e.lhs)).group)throw{code:"S0210",stack:(new Error).stack,position:e.position};t.group={lhs:e.rhs.map((function(e){return[T(e[0]),T(e[1])]})),position:e.position};break;case"^":"path"!==(t=T(e.lhs)).type&&(t={type:"path",steps:[t]});var l={type:"sort",position:e.position};l.terms=e.rhs.map((function(e){var t=T(e.expression);return S(l,t),{descending:e.descending,expression:t}})),t.steps.push(l),D(t);break;case":=":(t={type:"bind",value:e.value,position:e.position}).lhs=T(e.lhs),t.rhs=T(e.rhs),S(t,t.rhs);break;case"@":if(t=T(e.lhs),s=t,"path"===t.type&&(s=t.steps[t.steps.length-1]),void 0!==s.stages||void 0!==s.predicate)throw{code:"S0215",stack:(new Error).stack,position:e.position};if("sort"===s.type)throw{code:"S0216",stack:(new Error).stack,position:e.position};e.keepArray&&(s.keepArray=!0),s.focus=e.rhs.value,s.tuple=!0;break;case"#":t=T(e.lhs),s=t,"path"===t.type?s=t.steps[t.steps.length-1]:(t={type:"path",steps:[t]},void 0!==s.predicate&&(s.stages=s.predicate,delete s.predicate)),void 0===s.stages?s.index=e.rhs.value:s.stages.push({type:"index",value:e.rhs.value,position:e.position}),s.tuple=!0;break;case"~>":(t={type:"apply",value:e.value,position:e.position}).lhs=T(e.lhs),t.rhs=T(e.rhs);break;default:(t={type:e.type,value:e.value,position:e.position}).lhs=T(e.lhs),t.rhs=T(e.rhs),S(t,t.lhs),S(t,t.rhs)}break;case"unary":t={type:e.type,value:e.value,position:e.position},"["===e.value?t.expressions=e.expressions.map((function(e){var r=T(e);return S(t,r),r})):"{"===e.value?t.lhs=e.lhs.map((function(e){var r=T(e[0]);S(t,r);var n=T(e[1]);return S(t,n),[r,n]})):(t.expression=T(e.expression),"-"===e.value&&"number"===t.expression.type?(t=t.expression).value=-t.value:S(t,t.expression));break;case"function":case"partial":(t={type:e.type,name:e.name,value:e.value,position:e.position}).arguments=e.arguments.map((function(e){var r=T(e);return S(t,r),r})),t.procedure=T(e.procedure);break;case"lambda":t={type:e.type,arguments:e.arguments,signature:e.signature,position:e.position};var f=T(e.body);t.body=k(f);break;case"condition":(t={type:e.type,position:e.position}).condition=T(e.condition),S(t,t.condition),t.then=T(e.then),S(t,t.then),void 0!==e.else&&(t.else=T(e.else),S(t,t.else));break;case"transform":(t={type:e.type,position:e.position}).pattern=T(e.pattern),t.update=T(e.update),void 0!==e.delete&&(t.delete=T(e.delete));break;case"block":(t={type:e.type,position:e.position}).expressions=e.expressions.map((function(e){var r=T(e);return S(t,r),(r.consarray||"path"===r.type&&r.steps[0].consarray)&&(t.consarray=!0),r}));break;case"name":t={type:"path",steps:[e]},e.keepArray&&(t.keepSingletonArray=!0);break;case"parent":t={type:"parent",slot:{label:"!"+x++,level:1,index:w++}},E.push(t);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":t=e;break;case"operator":if("and"===e.value||"or"===e.value||"in"===e.value)e.type="name",t=T(e);else{if("?"!==e.value)throw{code:"S0201",stack:(new Error).stack,position:e.position,token:e.value};t=e}break;case"error":t=e,e.lhs&&(t=T(e.lhs));break;default:var h="S0206";"(end)"===e.id&&(h="S0207");var d={code:h,position:e.position,token:e.value};if(i)return u.push(d),{type:"error",error:d};throw d.stack=(new Error).stack,d}return e.keepArray&&(t.keepArray=!0),t};a=r(t),h();var O=d(0);if("(end)"!==o.id){var C={code:"S0201",position:o.position,token:o.value};f(C)}if("parent"===(O=T(O)).type||void 0!==O.seekingParent)throw{code:"S0217",token:O.type,position:O.position};return u.length>0&&(O.errors=u),O}})();t.exports=i},{"./signature":5}],5:[function(e,t,r){var n=e("./utils");const i=(()=>{"use strict";var e={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function t(t){for(var r=1,i=[],o={},a=o;r<t.length;){var s=t.charAt(r);if(":"===s)break;var u=function(){i.push(o),a=o,o={}},c=function(e,t,r,n){for(var i=1,o=t;o<e.length;)if(o++,(s=e.charAt(o))===n){if(0==--i)break}else s===r&&i++;return o};switch(s){case"s":case"n":case"b":case"l":case"o":o.regex="["+s+"m]",o.type=s,u();break;case"a":o.regex="[asnblfom]",o.type=s,o.array=!0,u();break;case"f":o.regex="f",o.type=s,u();break;case"j":o.regex="[asnblom]",o.type=s,u();break;case"x":o.regex="[asnblfom]",o.type=s,u();break;case"-":a.context=!0,a.contextRegex=new RegExp(a.regex),a.regex+="?";break;case"?":case"+":a.regex+=s;break;case"(":var p=c(t,r,"(",")"),l=t.substring(r+1,p);if(-1!==l.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:l,offset:r};o.regex="["+l+"m]",o.type="("+l+")",r=p,u();break;case"<":if("a"!==a.type&&"f"!==a.type)throw{code:"S0401",stack:(new Error).stack,value:a.type,offset:r};var f=c(t,r,"<",">");a.subtype=t.substring(r+1,f),r=f}r++}var h="^"+i.map((function(e){return"("+e.regex+")"})).join("")+"$",d=new RegExp(h),v=function(e){var t;if(n.isFunction(e))t="f";else switch(typeof e){case"string":t="s";break;case"number":t="n";break;case"boolean":t="b";break;case"object":t=null===e?"l":Array.isArray(e)?"a":"o";break;default:t="m"}return t},g=function(e,t){for(var r="^",n=0,o=0;o<i.length;o++){r+=i[o].regex;var a=t.match(r);if(null===a)throw{code:"T0410",stack:(new Error).stack,value:e[n],index:n+1};n=a[0].length}throw{code:"T0410",stack:(new Error).stack,value:e[n],index:n+1}};return{definition:t,validate:function(t,r){var n="";t.forEach((function(e){n+=v(e)}));var o=d.exec(n);if(o){var a=[],s=0;return i.forEach((function(n,i){var u=t[s],c=o[i+1];if(""===c)if(n.context&&n.contextRegex){var p=v(r);if(!n.contextRegex.test(p))throw{code:"T0411",stack:(new Error).stack,value:r,index:s+1};a.push(r)}else a.push(u),s++;else c.split("").forEach((function(r){if("a"===n.type){if("m"===r)u=void 0;else{u=t[s];var i=!0;if(void 0!==n.subtype)if("a"!==r&&c!==n.subtype)i=!1;else if("a"===r&&u.length>0){var o=v(u[0]);i=o===n.subtype.charAt(0)&&0===u.filter((function(e){return v(e)!==o})).length}if(!i)throw{code:"T0412",stack:(new Error).stack,value:u,index:s+1,type:e[n.subtype]};"a"!==r&&(u=[u])}a.push(u),s++}else a.push(u),s++}))})),a}g(t,n)}}}return t})();t.exports=i},{"./utils":6}],6:[function(e,t,r){const n=(()=>{"use strict";function e(e){var t=!1;if("number"==typeof e&&(t=!isNaN(e))&&!isFinite(e))throw{code:"D1001",value:e,stack:(new Error).stack};return t}function t(e){var t=!1;return Array.isArray(e)&&(t=0===e.filter((function(e){return"string"!=typeof e})).length),t}function r(t){var r=!1;return Array.isArray(t)&&(r=0===t.filter((function(t){return!e(t)})).length),r}function n(){var e=[];return e.sequence=!0,1===arguments.length&&e.push(arguments[0]),e}function i(e){return!0===e.sequence&&Array.isArray(e)}function o(e){return e&&(!0===e._jsonata_function||!0===e._jsonata_lambda)||"function"==typeof e}function a(e){return"number"==typeof e.arity?e.arity:"function"==typeof e.implementation?e.implementation.length:"number"==typeof e.length?e.length:e.arguments.length}function s(e){return e&&!0===e._jsonata_lambda}var u=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";function c(e){return"object"==typeof e&&null!==e&&u in e&&"next"in e&&"function"==typeof e.next}function p(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t&&null!==e&&null!==t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1;return!0}var n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(n.length!==i.length)return!1;for(n=n.sort(),i=i.sort(),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;for(r=0;r<n.length;r++){var o=n[r];if(!p(e[o],t[o]))return!1}return!0}return!1}function l(e){var t=[];for(let r of e)t.push(r);return t}return{isNumeric:e,isArrayOfStrings:t,isArrayOfNumbers:r,createSequence:n,isSequence:i,isFunction:o,isLambda:s,isIterable:c,getFunctionArity:a,isDeepEqual:p,stringToArray:l}})();t.exports=n},{}]},{},[3])(3)},540:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function a(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}function s(e){var n="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),a=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",p=t(n,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r(n+t(n,i,"[\\+\\-\\.]")+"*"),f=r(r(a+"|"+t(p,s,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("[1-9]"+i)+"|"+i),r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("0?[1-9]"+i)+"|0?0?"+i)),d=r(h+"\\."+h+"\\."+h+"\\."+h),v=r(o+"{1,4}"),g=r(r(v+"\\:"+v)+"|"+d),y=r(r(v+"\\:")+"{6}"+g),m=r("\\:\\:"+r(v+"\\:")+"{5}"+g),b=r(r(v)+"?\\:\\:"+r(v+"\\:")+"{4}"+g),k=r(r(r(v+"\\:")+"{0,1}"+v)+"?\\:\\:"+r(v+"\\:")+"{3}"+g),x=r(r(r(v+"\\:")+"{0,2}"+v)+"?\\:\\:"+r(v+"\\:")+"{2}"+g),w=r(r(r(v+"\\:")+"{0,3}"+v)+"?\\:\\:"+v+"\\:"+g),E=r(r(r(v+"\\:")+"{0,4}"+v)+"?\\:\\:"+g),A=r(r(r(v+"\\:")+"{0,5}"+v)+"?\\:\\:"+v),S=r(r(r(v+"\\:")+"{0,6}"+v)+"?\\:\\:"),D=r([y,m,b,k,x,w,E,A,S].join("|")),T=r(r(p+"|"+a)+"+"),O=(r(D+"\\%25"+T),r(D+r("\\%25|\\%(?!"+o+"{2})")+T)),C=r("[vV]"+o+"+\\."+t(p,s,"[\\:]")+"+"),P=r("\\["+r(O+"|"+D+"|"+C)+"\\]"),F=r(r(a+"|"+t(p,s))+"*"),j=r(P+"|"+d+"(?!"+F+")|"+F),N=r(i+"*"),M=r(r(f+"@")+"?"+j+r("\\:"+N)+"?"),U=r(a+"|"+t(p,s,"[\\:\\@]")),I=r(U+"*"),R=r(U+"+"),_=r(r(a+"|"+t(p,s,"[\\@]"))+"+"),q=r(r("\\/"+I)+"*"),z=r("\\/"+r(R+q)+"?"),L=r(_+q),$=r(R+q),H="(?!"+U+")",W=(r(q+"|"+z+"|"+L+"|"+$+"|"+H),r(r(U+"|"+t("[\\/\\?]",c))+"*")),Y=r(r(U+"|[\\/\\?]")+"*"),Z=r(r("\\/\\/"+M+q)+"|"+z+"|"+$+"|"+H),J=r(l+"\\:"+Z+r("\\?"+W)+"?"+r("\\#"+Y)+"?"),G=r(r("\\/\\/"+M+q)+"|"+z+"|"+L+"|"+H),V=r(G+r("\\?"+W)+"?"+r("\\#"+Y)+"?");return r(J+"|"+V),r(l+"\\:"+Z+r("\\?"+W)+"?"),r(r("\\/\\/("+r("("+f+")@")+"?("+j+")"+r("\\:("+N+")")+"?)")+"?("+q+"|"+z+"|"+$+"|"+H+")"),r("\\?("+W+")"),r("\\#("+Y+")"),r(r("\\/\\/("+r("("+f+")@")+"?("+j+")"+r("\\:("+N+")")+"?)")+"?("+q+"|"+z+"|"+L+"|"+H+")"),r("\\?("+W+")"),r("\\#("+Y+")"),r(r("\\/\\/("+r("("+f+")@")+"?("+j+")"+r("\\:("+N+")")+"?)")+"?("+q+"|"+z+"|"+$+"|"+H+")"),r("\\?("+W+")"),r("\\#("+Y+")"),r("("+f+")@"),r("\\:("+N+")"),{NOT_SCHEME:new RegExp(t("[^]",n,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",p,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",p,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",p,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",p,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",p,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",p,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",p,s),"g"),UNRESERVED:new RegExp(p,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",p,u),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+D+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+T+")")+"?\\]?$")}}var u=s(!1),c=s(!0),p=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},f=2147483647,h=36,d=1,v=26,g=38,y=700,m=72,b=128,k="-",x=/^xn--/,w=/[^\0-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=h-d,D=Math.floor,T=String.fromCharCode;function O(e){throw new RangeError(A[e])}function C(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}function P(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+C((e=e.replace(E,".")).split("."),t).join(".")}function F(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}var j=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:h},N=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},M=function(e,t,r){var n=0;for(e=r?D(e/y):e>>1,e+=D(e/t);e>S*v>>1;n+=h)e=D(e/S);return D(n+(S+1)*e/(e+g))},U=function(e){var t=[],r=e.length,n=0,i=b,o=m,a=e.lastIndexOf(k);a<0&&(a=0);for(var s=0;s<a;++s)e.charCodeAt(s)>=128&&O("not-basic"),t.push(e.charCodeAt(s));for(var u=a>0?a+1:0;u<r;){for(var c=n,p=1,l=h;;l+=h){u>=r&&O("invalid-input");var g=j(e.charCodeAt(u++));(g>=h||g>D((f-n)/p))&&O("overflow"),n+=g*p;var y=l<=o?d:l>=o+v?v:l-o;if(g<y)break;var x=h-y;p>D(f/x)&&O("overflow"),p*=x}var w=t.length+1;o=M(n-c,w,0==c),D(n/w)>f-i&&O("overflow"),i+=D(n/w),n%=w,t.splice(n++,0,i)}return String.fromCodePoint.apply(String,t)},I=function(e){var t=[],r=(e=F(e)).length,n=b,i=0,o=m,a=!0,s=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(a=(c=p.next()).done);a=!0){var l=c.value;l<128&&t.push(T(l))}}catch(e){s=!0,u=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw u}}var g=t.length,y=g;for(g&&t.push(k);y<r;){var x=f,w=!0,E=!1,A=void 0;try{for(var S,C=e[Symbol.iterator]();!(w=(S=C.next()).done);w=!0){var P=S.value;P>=n&&P<x&&(x=P)}}catch(e){E=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(E)throw A}}var j=y+1;x-n>D((f-i)/j)&&O("overflow"),i+=(x-n)*j,n=x;var U=!0,I=!1,R=void 0;try{for(var _,q=e[Symbol.iterator]();!(U=(_=q.next()).done);U=!0){var z=_.value;if(z<n&&++i>f&&O("overflow"),z==n){for(var L=i,$=h;;$+=h){var H=$<=o?d:$>=o+v?v:$-o;if(L<H)break;var W=L-H,Y=h-H;t.push(T(N(H+W%Y,0))),L=D(W/Y)}t.push(T(N(L,0))),o=M(i,j,y==g),i=0,++y}}}catch(e){I=!0,R=e}finally{try{!U&&q.return&&q.return()}finally{if(I)throw R}}++i,++n}return t.join("")},R=function(e){return P(e,(function(e){return x.test(e)?U(e.slice(4).toLowerCase()):e}))},_=function(e){return P(e,(function(e){return w.test(e)?"xn--"+I(e):e}))},q={version:"2.1.0",ucs2:{decode:F,encode:function(e){return String.fromCodePoint.apply(String,l(e))}},decode:U,encode:I,toASCII:_,toUnicode:R},z={};function L(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function H(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,L).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,L).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,L).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,L).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,L).replace(t.PCT_ENCODED,i)),e}function W(e){return e.replace(/^0*(.*)/,"$1")||"0"}function Y(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=p(r,2)[1];return n?n.split(".").map(W).join("."):e}function Z(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=p(r,3),i=n[1],o=n[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=p(a,2),u=s[0],c=s[1],l=c?c.split(":").map(W):[],f=u.split(":").map(W),h=t.IPV4ADDRESS.test(f[f.length-1]),d=h?7:8,v=f.length-d,g=Array(d),y=0;y<d;++y)g[y]=l[y]||f[v+y]||"";h&&(g[d-1]=Y(g[d-1],t));var m=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(m&&m.length>1){var k=g.slice(0,m.index),x=g.slice(m.index+m.length);b=k.join(":")+"::"+x.join(":")}else b=g.join(":");return o&&(b+="%"+o),b}return e}var J=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,G=void 0==="".match(/(){0}/)[1];function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?c:u;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(J);if(i){G?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=Z(Y(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=z[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)H(r,n);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=q.toASCII(r.host.replace(n.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}H(r,u)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function B(e,t){var r=!1!==t.iri?c:u,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(Z(Y(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var X=/^\.\.?\//,Q=/^\/\.(\/|$)/,K=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(X))e=e.replace(X,"");else if(e.match(Q))e=e.replace(Q,"/");else if(e.match(K))e=e.replace(K,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(ee);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?c:u,n=[],i=z[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?q.toUnicode(e.host):q.toASCII(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}H(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var o=B(e,t);if(void 0!==o&&("suffix"!==t.reference&&n.push("//"),n.push(o),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var a=e.path;t.absolutePath||i&&i.absolutePath||(a=te(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),n.push(a)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=V(re(e,r),r),t=V(re(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=te(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=te(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=te(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function ie(e,t,r){var n=a({scheme:"null"},r);return re(ne(V(e,n),V(t,n),n,!0),n)}function oe(e,t){return"string"==typeof e?e=re(V(e,t),t):"object"===n(e)&&(e=V(re(e,t),t)),e}function ae(e,t,r){return"string"==typeof e?e=re(V(e,r),r):"object"===n(e)&&(e=re(e,r)),"string"==typeof t?t=re(V(t,r),r):"object"===n(t)&&(t=re(t,r)),e===t}function se(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:u.ESCAPE,L)}function ue(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:u.PCT_ENCODED,$)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},pe={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function le(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var fe={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=le(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(le(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=p(r,2),i=n[0],o=n[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},he={scheme:"wss",domainHost:fe.domainHost,parse:fe.parse,serialize:fe.serialize},de={},ve="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ye=r(r("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+r("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+r("%"+ge+ge)),me="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ke="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xe=new RegExp(ve,"g"),we=new RegExp(ye,"g"),Ee=new RegExp(t("[^]",me,"[\\.]",'[\\"]',be),"g"),Ae=new RegExp(t("[^]",ve,ke),"g"),Se=Ae;function De(e){var t=$(e);return t.match(xe)?t:e}var Te={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},a=r.query.split("&"),s=0,u=a.length;s<u;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var p=c[1].split(","),l=0,f=p.length;l<f;++l)n.push(p[l]);break;case"subject":r.subject=ue(c[1],t);break;case"body":r.body=ue(c[1],t);break;default:i=!0,o[ue(c[0],t)]=ue(c[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var h=0,d=n.length;h<d;++h){var v=n[h].split("@");if(v[0]=ue(v[0]),t.unicodeSupport)v[1]=ue(v[1],t).toLowerCase();else try{v[1]=q.toASCII(ue(v[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=v.join("@")}return r},serialize:function(e,t){var r=e,n=o(e.to);if(n){for(var a=0,s=n.length;a<s;++a){var u=String(n[a]),c=u.lastIndexOf("@"),p=u.slice(0,c).replace(we,De).replace(we,i).replace(Ee,L),l=u.slice(c+1);try{l=t.iri?q.toUnicode(l):q.toASCII(ue(l,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[a]=p+"@"+l}r.path=n.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var h=[];for(var d in f)f[d]!==de[d]&&h.push(d.replace(we,De).replace(we,i).replace(Ae,L)+"="+f[d].replace(we,De).replace(we,i).replace(Se,L));return h.length&&(r.query=h.join("&")),r}},Oe=/^([^\:]+)\:(.*)/,Ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(Oe),n=e;if(r){var i=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),a=r[2],s=i+":"+(t.nid||o),u=z[s];n.nid=o,n.nss=a,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),o=z[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(n||t.nid)+":"+s,a}},Pe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Fe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(Pe)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};z[ce.scheme]=ce,z[pe.scheme]=pe,z[fe.scheme]=fe,z[he.scheme]=he,z[Te.scheme]=Te,z[Ce.scheme]=Ce,z[Fe.scheme]=Fe,e.SCHEMES=z,e.pctEncChar=L,e.pctDecChars=$,e.parse=V,e.removeDotSegments=te,e.serialize=re,e.resolveComponents=ne,e.resolve=ie,e.normalize=oe,e.equal=ae,e.escapeComponent=se,e.unescapeComponent=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7521:(e,t,r)=>{"use strict";r.d(t,{WI:()=>o});const n=[];for(let e=0;e<256;e++)n[e]=(e>>4&15).toString(16)+(15&e).toString(16);new WeakMap,new Map;let i=new class{constructor(){this.settled=!1,this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this.settled=!0,this._resolve(e)}reject(e){this.settled=!0,this._reject(e)}};i.resolve();let o=e=>{return"string"!=typeof(t=e)&&"strTag"in t?((e,t,r)=>{let n=e[0];for(let i=1;i<e.length;i++)n+=t[r?r[i-1]:i-1],n+=e[i];return n})(e.strings,e.values):e;var t}},7599:(e,t,r)=>{"use strict";r.d(t,{oi:()=>a.oi,iv:()=>i.iv,dy:()=>o.dy});var n,i=r(7898),o=r(3692),a=r(8922);null===(n=window.HTMLSlotElement)||void 0===n||n.prototype.assignedElements;console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.")}}]);